// "use strict";
//
// // fetch('https://jsonplaceholder.typicode.com/todos/1')
// //       .then(response => {
// //         console.log(response);
// //         return response.json();
// //       })
// //       .then(json => console.log(json))
// // Это один и тот же запрос
// // const result = fetch('https://jsonplaceholder.typicode.com/todos/1');
//
// // const imagesList = ['http://netgeek.biz/funnycat1.jpg', 'http://netgeek.biz/funnycat2.jpg', 'http://netgeek.biz/funnycat3.jpg']; // 25 штук
//
// // const result = new Promise((resolve, reject) => {}).then(() => {}).catch(() => {}).finally(() => {});
//
// // const resultQuery = new Promise((resolve, reject) => {
// //     // делаем запрос на сервер и получаем результат и записываем его в переменную result
// //     const result = fetch('http://netgeek.biz/funnycat1.jpg');
// //     // const result = {
// //     //     body: (...)
// //     //     bodyUsed: true
// //     //     headers: Headers {}
// //     //     ok: true
// //     //     redirected: false
// //     //     status: 200
// //     //     statusText: ""
// //     //     type: "cors"
// //     //     url: "https://jsonplaceholder.typicode.com/todos/1"
// //     // }
//
// //     if (result.status === 200) {
// //         // то выолняется функция resolve в которую мы передаем сам результат
// //         resolve(result);
// //     } else {
// //         // если запрос выполниться c ошибкой
// //         // то выполняется функци reject в которую передается информация об ошибке
// //         reject('Запрос не выполнился');
// //     }
// // })
//
// // resultQuery
// //     .then(response => {
// //         // "then" выполняется только если вые прошло успешно
// //         console.log(response);
// //         return response.json();
// //     })
// //     .catch(error => {
// //         // "catch" выполняется только если была ошибка
//
// //         console.log(error)
// //     })
// //     .finally(() => {
// //         // "finally" выполняется всегда, независимо от того была ошика или нет
// //         // выполняется всегда в конце
// //     })
//
// //////////////////////////////////////////////////////////////////////////////
//
// // new Promise((resolve, reject) => {
// //     const request = fetch('https://jsonplaceholder.typicode.com/todos');
//
// //     if (request.status === 200) {
// //         resolve(request);
// //     } else {
// //         reject('error');
// //     }
// // })
//
// //////////////////////////////////////////////////////////////////////////////
//
// // перед самым началом запроса показываем пользователю спиннер!!!!!!
//
// // const loadingDiv = document.getElementById('loading');
//
// loadingDiv.style.visibility = 'visible';
//
// fetch('https://jsonplaceholder.typicode.com/todos') // [{}, ...] получаем массив, который содержит 100 объектов
//     .then(response => response.json()) // преобразовываем его в читаемый для JS вид
//     .then(response => {
//         // Если запрос прошел и мы получили response, то на основе этого респонса
//         // мы создадим на странице много элементов верстки
//         const ul = document.querySelector('.todos');
//
//         response.forEach(item =>
//             // item === {
//             //     completed: false,
//             //     id: 1,
//             //     title: "delectus aut autem",
//             //     userId: 1,
//             // }
//             const todoItem = document.createElement("li");
//
//             todoItem.classList.add("todo__item");
//
//             if (item.completed) {
//               todoItem.classList.add("todo__item_completed");
//             }
//
//             todoItem.innerHTML = `
//                 <div class="todo__wrapper">
//                     <input type="checkbox" class="todo__completed" id="todo-completed-${item.id}" ${item.completed ? 'checked' : ''} />
//                     <div class="todo__text">${item.title}</div>
//                     <div class="todo__action">
//                         <button class="todo__close btn btn_small btn_red" id="todo-delete-${item.id}" >Х</button>
//                         <span class="todo__date">-</span>
//                     </div>
//                 </div>
//             `;
//
//             ul.append(todoItem);
//         });
//
//         return 77;
//     })
//     // .then(res => {
//     //     const request = fetch('https://jsonplaceholder.typicode.com/posts');
//
//     //     console.log(request);
//     // })
//     .catch(error => {
//         // выводим на странице красивое сообщение об ошибке
//         const ul = document.querySelector('.todos');
//
//         const errorMessage = document.createElement("li");
//
//         errorMessage.innerHTML = `<div class="todo__wrapper todo__error">Что-то пошло не так и запрос не выполнился</div>`;
//
//         ul.append(errorMessage);
//     })
//     .finally(() => {
//         // console.log('Я выполняюсь в любом случае');
//         loadingDiv.style.visibility = 'hidden';
//         // удалем спиннер со страницы
//     })
//
// // const result = new Promise((resolve, reject) => {
// //     // в данном примере setTimeout - это запрос на сервер за данными
// //     setTimeout(() => {
// //         resolve([15]); // в resolve передается успешный результат
// //         reject('[15]'); // в reject передается какое-то сообщение об ошибке
// //     }, 2000);
// // })
// //     .then(result => console.log(result))
// //     .catch((error) => console.log(error))
// //     .finally(() => console.log('finally'))
//
// const getData = async () => {
//     const request = await fetch('https://jsonplaceholder.typicode.com/posts');
//
//     // console.log не будет выполняться до тех пор, пока не выполниться запрос
//     console.log(request);
//
//     // const result = await request.json();
//     // console.log(result);
// }
//
// getData();


// const URL = 'https://jsonplaceholder.typicode.com/posts';
//
// const getData = async () => {
//
//     const response = await fetch(`https://jsonplaceholder.typicode.com/posts/`);
//     const posts = await response.json();
//     console.log(posts)
//
//
//
// }
// getData();
//
// Функция для загрузки поста с сервера по его id
async function loadPost(postId) {
    try {
        const response = await fetch(`https://jsonplaceholder.typicode.com/posts/${postId}`);
        if (!response.ok) {
            throw new Error(`Не удалось загрузить пост ${postId}. Статус ошибки: ${response.status}`);
        }
        const post = await response.json();

        return post;
    } catch (error) {
        console.error(`Ошибка при загрузке поста ${postId}:`, error);
        throw error;
    }
}

// Функция для отображения постов на странице
function renderPosts(posts) {
    const postsContainer = document.getElementById('postsContainer');
    // postsContainer.innerHTML = ''; // Очищаем контейнер перед отображением новых постов
    posts.forEach(post => {
        const postElement = document.createElement('div');
        postElement.innerHTML = `<h2>${post.title}</h2><p>${post.body}</p>`;
        postsContainer.appendChild(postElement);
    });
}

// Порядок, в котором необходимо загрузить посты
const postIds = [15, 23, 7, 3];

// Загрузка постов в определенном порядке и их отображение на странице
Promise.all(postIds.map(postId => loadPost(postId)))
    .then(posts => {
        console.log('Все посты успешно загружены:', posts);
        renderPosts(posts);
    })

